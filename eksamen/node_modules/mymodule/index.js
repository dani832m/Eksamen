// Funktion, der samlet set henter nuværende pris på Bitcoin.
function indlaesBitcoinKurs() {
    console.log("Komponent fundet!\n"); // Til debugging.

    /*
        Inkluderer node-modulet "XMLHttpRequest", der er nødvendigt
        at installere på serveren, for at modulet virker efter hensigten.
    */
    var xhr = require('xmlhttprequest').XMLHttpRequest
    var xmlhttp = new xhr;
    
    xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
        var myObj = JSON.parse(this.responseText); // Parser objektet.
        /*
            Fordi vi kun er interesserede i den value, der repræsenterer
            "price"-valuen i objektet, anvendes dot-operator som følger:
        */
        console.log("Bitcoins nuværende pris: " + myObj.ticker.price);
        }
    };
    
    // Angiver URL til GET og sender efterfølgende.
    xmlhttp.open("GET", "https://api.cryptonator.com/api/ticker/btc-eur", true);
    xmlhttp.send();
}

// Eksporterer funktionen.
exports.indlaesBitcoinKurs = indlaesBitcoinKurs;